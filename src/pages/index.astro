---
import Layout from '../layouts/Layout.astro';
import GetInvolvedForm from '../components/shared/Form/GetInvolvedForm.astro';

import { Image } from 'astro:assets';
import HomeHero from '../assets/images/home/home-hero.png';
import WhoWeAre01 from '../assets/images/home/who-we-are-01.png';
import WhoWeAre02 from '../assets/images/home/who-we-are-02.png';
import WhatWeDo01 from '../assets/images/home/what-we-do-01.png';
import WhatWeDo02 from '../assets/images/home/what-we-do-02.png';
import WhatWeDo03 from '../assets/images/home/what-we-do-03.png';
import WhatWeDo04 from '../assets/images/home/what-we-do-04.png';
import WhatWeDo05 from '../assets/images/home/what-we-do-05.png';
import WhatWeDo06 from '../assets/images/home/what-we-do-06.png';
import LatestNews from '../assets/images/home/latest-news.png';

//Phosphor icons
import GraduationCap from 'phosphor-astro/GraduationCap.astro';
import ChatsTeardrop from 'phosphor-astro/ChatsTeardrop.astro';
import SpeakerHigh from 'phosphor-astro/SpeakerHigh.astro';
import Handshake from 'phosphor-astro/Handshake.astro';
import SealCheck from 'phosphor-astro/SealCheck.astro';

import { t, type Lang } from '../i18n/get';

const baseUrl = import.meta.env.BASE_URL;

// Detect current language from URL
const currentPath = Astro.url.pathname;

// Remove baseUrl to get relative path for language detection
const relativePath = currentPath.startsWith(baseUrl)
  ? currentPath.slice(baseUrl.length)
  : currentPath;

const lang: Lang =
  relativePath.startsWith('es/') || relativePath.startsWith('es') ? 'es' : 'en';

const aboutUs = `${baseUrl}${lang === 'es' ? 'es/' : ''}about`;
const whatWeDo = `${baseUrl}${lang === 'es' ? 'es/' : ''}what-we-do`;
const latestUpdates = `${baseUrl}${lang === 'es' ? 'es/' : ''}latest-updates`;
---

<script>
  import '@momentum-design/components/dist/components/button/index.js';
  import '@momentum-design/components/dist/components/buttonlink/index.js';
  import '@momentum-design/components/dist/components/card/index.js';
  import '@momentum-design/components/dist/components/input/index.js';
  import '@momentum-design/components/dist/components/icon/index.js';
  import '@momentum-design/components/dist/components/text/index.js';
</script>

<Layout title={t(lang, 'main.title')}>
  <!-- Hero -->
  <section class="section hero">
    <div class="inner-container">
      <h1 set:html={t(lang, 'hero.title')} />
      <p>
        {t(lang, 'hero.subtitle')}

        <mdc-buttonlink size="40" href={aboutUs} rel="noopener noreferrer">
          {t(lang, 'hero.cta')}
        </mdc-buttonlink>
      </p>

      <Image src={HomeHero} alt={t(lang, 'hero.imageAlt')} />
    </div>
  </section>

  <!-- Who we are -->
  <section class="section who-we-are">
    <div class="inner-container overview">
      <!-- Overview -->
      <div class="section-left">
        <div class="section-title">
          <h2 class="pre-header">{t(lang, 'whoWeAre.tag')}</h2>
          <p class="sub-header">
            {t(lang, 'whoWeAre.heading')}
          </p>
        </div>
        <p>
          {t(lang, 'whoWeAre.description1')}
        </p>
        <p>
          {t(lang, 'whoWeAre.description2')}

          <mdc-buttonlink size="40" href={whatWeDo} rel="noopener noreferrer">
            {t(lang, 'whoWeAre.cta')}
          </mdc-buttonlink>
        </p>
      </div>
      <div class="section-right">
        <Image src={WhoWeAre01} alt={t(lang, 'whoWeAre.imageAlt1')} />
        <Image src={WhoWeAre02} alt={t(lang, 'whoWeAre.imageAlt2')} />
      </div>
    </div>
    <div class="inner-container who-we-are-card-list">
      <!-- Card List -->
      <div class="card-list">
        <ul>
          <li>
            <div class="card-icon"><GraduationCap class="icon" /></div>
            <label>{t(lang, 'values.education.title')}</label>
            <p>
              {t(lang, 'values.education.description')}
            </p>
          </li>
          <li>
            <div class="card-icon"><ChatsTeardrop class="icon" /></div>
            <label>{t(lang, 'values.communication.title')}</label>
            <p>
              {t(lang, 'values.communication.description')}
            </p>
          </li>
          <li>
            <div class="card-icon"><SpeakerHigh class="icon" /></div>
            <label>{t(lang, 'values.advocacy.title')}</label>
            <p>
              {t(lang, 'values.advocacy.description')}
            </p>
          </li>
          <li>
            <div class="card-icon"><Handshake class="icon" /></div>
            <label>{t(lang, 'values.collaboration.title')}</label>
            <p>
              {t(lang, 'values.collaboration.description')}
            </p>
          </li>
          <li>
            <div class="card-icon"><SealCheck class="icon" /></div>
            <label>{t(lang, 'values.oversight.title')}</label>
            <p>
              {t(lang, 'values.oversight.description')}
            </p>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- What we do -->
  <section class="section secondary what-we-do">
    <div class="inner-container">
      <!-- Section Overview -->
      <div class="section-title">
        <h2 class="pre-header">{t(lang, 'nav.whatWeDo')}</h2>
        <p class="sub-header">
          {t(lang, 'programs.heading')}
        </p>
      </div>

      <!-- Card List -->
      <div class="card-list">
        <ul>
          <li>
            <Image src={WhatWeDo01} alt="Image" />
            <div class="card-list-content">
              <label>{t(lang, 'programs.cafa.title')}</label>
              <p>{t(lang, 'programs.cafa.description')}</p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo02} alt="Image" />
            <div class="card-list-content">
              <label>{t(lang, 'programs.publicDefender.title')}</label>
              <p>
                {t(lang, 'programs.publicDefender.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo03} alt="Image" />
            <div class="card-list-content">
              <label>{t(lang, 'programs.policeOversight.title')}</label>
              <p>
                {t(lang, 'programs.policeOversight.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo04} alt="Image" />
            <div class="card-list-content">
              <label>{t(lang, 'programs.earlyCaseReview.title')}</label>
              <p>
                {t(lang, 'programs.earlyCaseReview.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo05} alt="Image" />
            <div class="card-list-content">
              <label>{t(lang, 'programs.communityPower.title')}</label>
              <p>
                {t(lang, 'programs.communityPower.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo06} alt="Image" />
            <div class="card-list-content">
              <label>{t(lang, 'programs.rightsEducation.title')}</label>
              <p>
                {t(lang, 'programs.rightsEducation.description')}
              </p>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Latest Updates -->
  <section class="section latest-news">
    <div class="inner-container">
      <div class="left">
        <h2>{t(lang, 'news.heading')}</h2>
        <p>{t(lang, 'news.description1')}</p>
        <p>
          {t(lang, 'news.description2')}

          <mdc-buttonlink
            size="40"
            href={latestUpdates}
            rel="noopener noreferrer"
          >
            {t(lang, 'news.cta')}
          </mdc-buttonlink>
        </p>
      </div>

      <div class="right">
        <Image src={LatestNews} alt={t(lang, 'news.iamgeAlt')} />
      </div>
    </div>
  </section>

  <!-- Contact / Get Invovled Form -->
  <section class="section secondary contact">
    <div class="inner-container">
      <div class="contact-home">
        <h2>{t(lang, 'form.title')}</h2>
        <GetInvolvedForm lang={lang} />
      </div>
    </div>
  </section>
</Layout>

<script>
  // Import the components we need
  import '@momentum-design/components/dist/components/text/index.js';
  import '@momentum-design/components/dist/components/button/index.js';
  import '@momentum-design/components/dist/components/card/index.js';
</script>
