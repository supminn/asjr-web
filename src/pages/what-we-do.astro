---
import Layout from '../layouts/Layout.astro'; 

//Images
import { Image } from 'astro:assets';
import WhatWeDo01 from '../assets/images/what-we-do/what-we-do-01.png';
import WhatWeDo02 from '../assets/images/what-we-do/what-we-do-02.png';
import WhatWeDo03 from '../assets/images/what-we-do/what-we-do-03.png';
import WhatWeDo04 from '../assets/images/what-we-do/what-we-do-04.png';
import WhatWeDo05 from '../assets/images/what-we-do/what-we-do-05.png';
import WhatWeDo06 from '../assets/images/what-we-do/what-we-do-06.png';

import { t, type Lang } from '../i18n/get';

const baseUrl = import.meta.env.BASE_URL;

// Detect current language from URL
const currentPath = Astro.url.pathname;

// Remove baseUrl to get relative path for language detection
const relativePath = currentPath.startsWith(baseUrl)
  ? currentPath.slice(baseUrl.length)
  : currentPath;

const lang: Lang =
  relativePath.startsWith('es/') || relativePath.startsWith('es') ? 'es' : 'en';

---

<Layout title={t(lang, 'whatWeDo.title')}>
  <section class="section what-we-do">
    <div class="inner-container">
      <h1>{t(lang, 'whatWeDo.title')}</h1>
      <p>
        {t(lang, 'whatWeDo.description')}
      </p>

      <!-- Card List -->
      <div class="card-list">
        <ul>
          <li>
            <Image src={WhatWeDo01} alt={t(lang, 'whatWeDo.counsel.imageAlt')} />
            <div class="card-list-content">
              <label>{t(lang, 'whatWeDo.counsel.title')}</label>
              <p>{t(lang, 'whatWeDo.counsel.description')}</p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo02} alt={t(lang, 'whatWeDo.office.imageAlt')} />
            <div class="card-list-content">
              <label>{t(lang, 'whatWeDo.office.title')}</label>
              <p>
                {t(lang, 'whatWeDo.office.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo03} alt={t(lang, 'whatWeDo.dismissal.imageAlt')} />
            <div class="card-list-content">
              <label>{t(lang, 'whatWeDo.dismissal.title')}</label>
              <p>
                {t(lang, 'whatWeDo.dismissal.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo04} alt={t(lang, 'whatWeDo.community.imageAlt')} />
            <div class="card-list-content">
              <label>{t(lang, 'whatWeDo.community.title')}</label>
              <p>
                {t(lang, 'whatWeDo.community.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo05} alt={t(lang, 'whatWeDo.publicDefenders.imageAlt')} />
            <div class="card-list-content">
              <label>{t(lang, 'whatWeDo.publicDefenders.title')}</label>
              <p>
                {t(lang, 'whatWeDo.publicDefenders.description')}
              </p>
            </div>
          </li>
          <li>
            <Image src={WhatWeDo06} alt={t(lang, 'whatWeDo.rightsEducation.imageAlt')} />
            <div class="card-list-content">
              <label>{t(lang, 'whatWeDo.rightsEducation.title')}</label>
              <p>
                {t(lang, 'whatWeDo.rightsEducation.description')}
              </p>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>
</Layout>

<script>
  import '@momentum-design/components/dist/components/text/index.js';
  import '@momentum-design/components/dist/components/card/index.js';
  import '@momentum-design/components/dist/components/button/index.js';
</script>