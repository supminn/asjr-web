---
// SiteNavigation.astro - Reusable navigation component for desktop and mobile
import './SiteNavigation.css';
import { t } from '../../../i18n/get';

export interface Props {
  class?: string;
  orientation?: 'horizontal' | 'vertical';
  currentPath?: string;
  lang?: 'en' | 'es';
  isSpanish?: boolean;
  counterpartPath?: string; // target path when toggling language
}

const {
  class: className = '',
  orientation = 'horizontal',
  currentPath = '',
  lang = 'en',
  isSpanish = false,
  counterpartPath = '/',
} = Astro.props as Props;

// Get base URL from Astro environment
const baseUrl = import.meta.env.BASE_URL;

// Locale prefix helper
const localePrefix = lang === 'es' ? 'es/' : '';

// Navigation items (labels translated, href prefixed when Spanish)
const navItems = [
  { label: t(lang, 'nav.about'), segment: 'about' },
  { label: t(lang, 'nav.ourWork'), segment: 'what-we-do' },
  { label: t(lang, 'nav.resources'), segment: 'resources' },
  { label: t(lang, 'nav.latestUpdates'), segment: 'latest-updates' },
  { label: t(lang, 'nav.getInvolved'), segment: 'get-involved' },
].map((item) => ({
  ...item,
  href: `${baseUrl}${localePrefix}${item.segment}`,
}));
---

<script>
  // Import Momentum Design link component
  import '@momentum-design/components/dist/components/link/index.js';
  import '@momentum-design/components/dist/components/text/index.js';
  import '@momentum-design/components/dist/components/toggle/index.js';
</script>

<nav class={`site-navigation site-navigation--${orientation} ${className}`}>
  <div class="nav-item nav-item--toggle">
    <mdc-toggle
      name="lang"
      value={isSpanish ? 'es' : 'en'}
      label={isSpanish ? 'Español' : 'English'}
      checked={isSpanish ? true : undefined}
      size="compact"
      aria-label={isSpanish ? 'Switch to English' : 'Cambiar a Español'}
      onclick={`window.location.href='${counterpartPath}'`}></mdc-toggle>
  </div>
  {
    navItems.map(({ label, href }) => (
      <mdc-link
        href={href}
        class={`nav-item ${currentPath === href || currentPath === href + '/' ? 'nav-item--active' : ''}`}
        inline={
          currentPath === href || currentPath === href + '/' ? true : undefined
        }
      >
        <mdc-text type="body-large-medium" tagname="span">
          {label}
        </mdc-text>
      </mdc-link>
    ))
  }
</nav>
